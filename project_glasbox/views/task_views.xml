<odoo>

    <record id="project_enterprise.project_task_view_gantt" model="ir.ui.view">
        <field name="name">project.task.view.gantt</field>
        <field name="model">project.task</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <gantt date_start="date_start"
                date_stop="date_end"
                default_scale="month"
                scales="day,week,month,year"
                color="project_color"
                string="Project"
                disable_drag_drop = "1"
                thumbnails="{'user_id': 'image_128'}"
                js_class="project_ganttview"
                display_unavailability="1"
                sample="1"
                precision="{'day': 'hour:quarter', 'week': 'day:half', 'month': 'day:full'}">
            </gantt>
        </field>
    </record>

    <record model="ir.ui.view" id="view_task_kanban_inherited_glassbox">
        <field name="name">project.task.kanban.inherited.glasbox</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('o_kanban_record_bottom')]/div[hasclass('oe_kanban_bottom_left')]" position="inside">
                <field name="check_completion_date" invisible="1"/>
                <field name="check_l_end_date" invisible="1"/>
                <field name='completion_date' invisible='1'/>
                <field name='l_end_date' invisible='1'/>
                <field name='milestone' invisible='1'/>
                <field name='on_hold' invisible='1'/>
                <field name='date_end' invisible='1'/>
                <field name='task_delay' invisible='1'/>
                <field name='check_c_date' invisible='1'/>
                <field name='check_ahead_schedule' invisible='1'/>
                <field name='check_delay' invisible='1'/>
                <field name='check_milestone' invisible='1'/>
                <field name='check_hold' invisible='1'/>
                <field name='check_overdue' invisible='1'/>
                <div class="o_kanban_inline_block d-flex flex-row">
                    <i title="Ahead Of Schedule" attrs="{'invisible':[('check_completion_date', '=', False)]}" class="fa fa-star" style="color: #0000FF;"/>
                    <i title="Finished" attrs="{'invisible':['|', ('completion_date', '=', False), ('check_completion_date', '=', True)]}" class="fa fa-check-square-o" style="color: #2AAA8A;"/>
                    <i title="Delay" attrs="{'invisible':[('check_delay', '=', False)]}" class="fa fa-clock-o" style="color: #F0E130;"/>
                    <i title="Milestone" attrs="{'invisible':['|', ('milestone', '!=', True), ('check_completion_date', '=', True)]}" class="fa fa-flag" style="color: #AAFF00;"/>
                    <i title="On Hold" attrs="{'invisible':['|', ('on_hold', '=', 0), ('check_c_date', '=', True)]}" class="fa fa-hourglass-half" style="color: #000000;"/>
                    <i title="Overdue" attrs="{'invisible':['|', ('check_l_end_date','=',False), ('check_c_date', '=', True)]}" class="fa fa-exclamation" style="color: #FF0000"/>
                </div>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_task_tree2_inherited_glasbox">
        <field name="name">project.task.tree2.inherited.glasbox</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <xpath expr="field[@name='activity_ids']" position="after">
                <field name="check_completion_date" invisible="1"/>
                <field name="check_l_end_date" invisible="1"/>
                <field name='completion_date' invisible='1'/>
                <field name='l_end_date' invisible='1'/>
                <field name='milestone' invisible='1'/>
                <field name='on_hold' invisible='1'/>
                <field name='date_end' invisible='1'/>
                <field name='task_delay' invisible='1'/>
                <field name='check_c_date' invisible='1'/>
                <field name='check_ahead_schedule' invisible='1'/>
                <field name='check_delay' invisible='1'/>
                <field name='check_milestone' invisible='1'/>
                <field name='check_hold' invisible='1'/>
                <field name='check_overdue' invisible='1'/>
                <button title="Ahead Of Schedule" class='btn-schedule' attrs="{'invisible':[('check_completion_date', '=', False)]}" icon="fa-star"/>
                <button title="Finished" class='btn-finished' attrs="{'invisible':['|', ('completion_date', '=', False), ('check_completion_date', '=', True)]}" icon="fa-check-square-o"/>
                <button class="btn-delay" title="Delay" attrs="{'invisible':[('check_delay', '=', False)]}" icon="fa-clock-o"/>
                <button class="btn-milestone" title="Milestone" attrs="{'invisible':['|', ('milestone', '!=', True), ('check_completion_date', '=', True)]}" icon="fa-flag"/>
                <button class="btn-hold" title="On Hold" attrs="{'invisible':['|', ('on_hold', '=', 0), ('check_c_date', '=', True)]}" icon="fa-hourglass-half"/>
                <button class="btn-overdue" title="Overdue" attrs="{'invisible':['|', ('check_l_end_date','=',False), ('check_c_date', '=', True)]}" icon="fa-exclamation"/>
            </xpath>
        </field>
    </record>

    <record id="view_task_gantt_data_form" model="ir.ui.view">
        <field name="name">project.task.gant.data.form</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='description_page']" position="after">
                <page string="Gantt View">
                    <group>
                        <group>
                            <field name="first_task" type="checkbox"/>
                            <field name="planned_duration"/>
                            <field name="on_hold"/>
                            <field name="buffer_time"/>
                            <field name="date_start" attrs="{'readonly':[('first_task', '=', False)]}"/>
                            <field name="date_end"/>
                            <field name="task_delay" readonly='1'/>
                            <field name="accumulated_delay" attrs="{'invisible':[('first_task', '!=', False)]}" readonly='1'/>
                        </group>
                        <group>
                            <field name="milestone" type="checkbox" groups='project.group_project_manager'/>
                            <field name="scheduling_mode" widget="radio" attrs="{'invisible':[('milestone', '!=', True)]}"/>
                            <field name="l_start_date" attrs="{'readonly': ['|', ('milestone', '=', False), '&amp;', ('milestone', '=', True), ('scheduling_mode', '=', '1')]}"/>
                            <field name="l_end_date" attrs="{'readonly': ['|', ('milestone', '=', False), '&amp;', ('milestone', '=', True), ('scheduling_mode', '=', '0')]}"/>
                            <field name="dependency_task_ids" string="Dependent Task" attrs="{'invisible':[('first_task', '!=', False)]}">
                                <tree editable="bottom">
                                    <field name="project_id" invisible="1"/>
                                    <field name="task_id" domain="[('project_id','=',parent.project_id)]"/>
                                    <field name="relation_type" readonly='1'/>
                                </tree>
                            </field>
                        </group>
                    </group>
                </page>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="delay_due_to"/>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="replace">
                <field name="completion_date" context="{'c_date': True}"/>
            </xpath>
            <xpath expr="//div[hasclass('oe_button_box')]" position="inside">
                <field name="check_completion_date" invisible="1"/>
                <field name="check_l_end_date" invisible="1"/>
                <field name='task_delay' invisible="1"/>
                <field name="date_end" invisible="1"/>
                <field name="l_end_date" invisible="1"/>
                <field name="completion_date" invisible="1"/>
                <field name="milestone" invisible="1"/>
                <field name="on_hold" invisible="1"/>
                <field name="check_c_date" invisible="1"/>
                <field name='check_ahead_schedule' invisible='1'/>
                <field name='check_delay' invisible='1'/>
                <field name='check_milestone' invisible='1'/>
                <field name='check_hold' invisible='1'/>
                <field name='check_overdue' invisible='1'/>
                <div class="oe_stat_button h1 d-flex flex-inline">
                    <i title="Ahead Of Schedule" attrs="{'invisible':[('check_completion_date', '=', False)]}" class="fa fa-star" style="color: #0000FF;"/>
                    <i title="Finished" attrs="{'invisible':['|', ('completion_date', '=', False), ('check_completion_date', '=', True)]}" class="fa fa-check-square-o" style="color: #2AAA8A;"/>
                    <i title="Delay" attrs="{'invisible':[('check_delay', '=', False)]}" class="fa fa-clock-o" style="color: #F0E130;"/>
                    <i title="Milestone" attrs="{'invisible':['|', ('milestone', '!=', True), ('check_completion_date', '=', True)]}" class="fa fa-flag" style="color: #AAFF00;"/>
                    <i title="On Hold" attrs="{'invisible':['|', ('on_hold', '=', 0), ('check_c_date', '=', True)]}" class="fa fa-hourglass-half" style="color: #000000;"/>
                    <i title="Overdue" attrs="{'invisible':['|', ('check_l_end_date','=',False), ('check_c_date', '=', True)]}" class="fa fa-exclamation" style="color: #FF0000"/>
                </div>
            </xpath>
        </field>
    </record>

    <function name="write" model="ir.model.data">
        <function name="search" model="ir.model.data">
            <value eval="[('module', '=', 'project'), ('name', '=', 'act_project_project_2_project_task_all')]"/>
        </function>
        <value eval="{'noupdate': False}" />
    </function>

    <!-- All Task's Filter for gantt view -->
    <record id="all_tasks_filter" model="ir.filters">
        <field name="name">All Tasks</field>
        <field name="model_id">project.task</field>
        <field name="user_id" eval="False"/>
        <field name="is_default" eval="False"/>
        <field name="context">{'group_by': ['project_id', 'stage_id', 'user_id', 'name']}
        </field>
        <field name="action_id" ref="project.action_view_all_task"/>
    </record>

    <!-- Project Task's Filter for gantt view -->
    <record id="project_tasks_filter" model="ir.filters">
        <field name="name">Project Tasks</field>
        <field name="model_id">project.task</field>
        <field name="user_id" eval="False"/>
        <field name="is_default" eval="False"/>
        <field name="context">{'group_by': ['project_id', 'stage_id', 'user_id', 'name']}
        </field>
        <field name="action_id" ref="project.act_project_project_2_project_task_all"/>
    </record>

</odoo>
